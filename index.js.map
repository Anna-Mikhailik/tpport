{"version":3,"file":"index.js","sources":["../src/js/work-together.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst contactEmail = document.querySelector(\".work-together-input-email\");\nconst contactComment = document.querySelector(\".work-together-comments\");\nconst contactForm = document.querySelector(\".work-together-subscribe\");\nconst label = document.querySelector(\".label-input-email\");\nconst modalBackdrop = document.querySelector(\".work-together-backdrop\");\nconst modalBackdropBg = document.querySelector(\".modal-backdrop-bg\");\nconst modalTitle = document.querySelector(\".work-together-modal-head-text\");\nconst modalText = document.querySelector(\".work-together-invitation\");\nconst modalBtn = document.querySelector(\".work-together-modal-close-x-btn\");\nconst body = document.body;\n\n// При завантаженні сторінки приховати затемнення\nmodalBackdropBg.style.opacity = '0';\nmodalBackdropBg.style.visibility = 'hidden';\nmodalBackdropBg.style.pointerEvents = 'none';\n\ncontactForm.addEventListener(\"submit\", getContactInfo);\n\nfunction getContactInfo(event) {\n    event.preventDefault();\n\n    const userEmail = event.target.elements.email.value.trim();\n    const userComment = event.target.elements.comments.value.trim();\n    \n    const url = 'https://portfolio-js.b.goit.study/api/requests';\n    const data = {\n        email: userEmail,\n        comment: userComment\n    };\n\n    fetch(url, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(data),\n    })\n    .then(response => {\n        if (!response.ok) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, try again!',\n                messageColor: 'white',\n                messageSize: '16',\n                backgroundColor: 'red',\n                theme: 'dark',\n                position: 'bottomRight',\n            });\n            throw new Error('Network response was not ok');\n        }\n        return response.json();\n    })\n    .then(data => {\n        openModal(data.title, data.message);\n        contactForm.reset();\n        label.textContent = \"\";\n        contactEmail.style.borderBottomColor = 'rgba(250, 250, 250, 0.20)';\n    })\n    .catch(() => {\n        iziToast.error({\n            title: 'Error',\n            message: 'Sorry, network failed, check your modem and try again!',\n            messageColor: 'white',\n            messageSize: '16',\n            backgroundColor: 'red',\n            theme: 'dark',\n            position: 'bottomRight',\n        });\n    });\n}\n\ncontactEmail.addEventListener(\"blur\", checkEmail);\n\nfunction checkEmail(event) {\n    const userEmail = event.target.value.trim();\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (userEmail === \"\") return;\n    \n    if (emailRegex.test(userEmail)) {\n        label.textContent = \"Success!\";\n        contactEmail.style.borderBottomColor = '#3CBC81';\n        label.style.color = '#3CBC81';\n    } else {\n        label.textContent = \"Invalid email, try again\";\n        contactEmail.style.borderBottomColor = '#E74A3B';\n        label.style.color = '#E74A3B';\n    }\n}\n\ncontactComment.addEventListener(\"input\", checkCommentLength);\n\nfunction checkCommentLength(event) {\n    const maxLength = parseInt(contactComment.getAttribute(\"maxlength\"));\n    let userComment = event.target.value;\n    \n    if (userComment.length > maxLength) {\n        contactComment.value = userComment.slice(0, maxLength);\n    }\n    contactComment.style.whiteSpace = 'nowrap';\n    contactComment.style.overflow = 'hidden';\n    contactComment.style.textOverflow = 'ellipsis';\n}\n\nmodalBtn.addEventListener(\"click\", closeModal);\nmodalBackdropBg.addEventListener(\"click\", closeModal);\ndocument.addEventListener(\"keydown\", event => {\n    if (event.key === 'Escape') {\n        closeModal();\n    }\n});\n\nfunction openModal(title, message) {\n    modalBackdrop.classList.remove(\"visually-hidden\");\n    modalBackdrop.style.display = 'block';\n    modalBackdrop.style.pointerEvents = 'auto';\n    modalBackdropBg.classList.remove(\"visually-hidden\");\n    modalBackdropBg.style.pointerEvents = 'auto';\n    modalBackdropBg.style.opacity = '1';\n    modalBackdropBg.style.visibility = 'visible';\n    body.classList.add('modal-open');\n    modalTitle.textContent = title;\n    modalText.textContent = message;\n}\n\nfunction closeModal() {\n    modalBackdrop.classList.add(\"visually-hidden\");\n    modalBackdrop.style.display = 'none';\n    modalBackdrop.style.pointerEvents = 'none';\n    modalBackdropBg.classList.add(\"visually-hidden\");\n    modalBackdropBg.style.pointerEvents = 'none';\n    modalBackdropBg.style.opacity = '0';\n    modalBackdropBg.style.visibility = 'hidden';\n    body.classList.remove('modal-open');\n}\n"],"names":["contactEmail","contactComment","contactForm","label","modalBackdrop","modalBackdropBg","modalTitle","modalText","modalBtn","body","getContactInfo","event","userEmail","userComment","response","iziToast","data","openModal","checkEmail","emailRegex","checkCommentLength","maxLength","closeModal","title","message"],"mappings":"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"}