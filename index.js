import{i as m}from"./assets/vendor-gdnASEpK.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();async function L(e){try{const t=await fetch("https://portfolio-js.b.goit.study/api/requests",e);if(!t.ok)throw new Error("Not found");return t.json()}catch(t){throw t}}const b=document.querySelector(".footer-form-order"),d=document.querySelector(".email"),a=document.querySelector(".message");d.addEventListener("change",function(){g(d)});function f(e){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e.toLowerCase())}function g(e){p(e);const t=e.value,r=f(t),n=document.querySelector("label");r?(e.classList.remove("error-label"),e.classList.add("success-label"),u(e,"Success!","success"),n&&(n.classList.remove("error-label"),n.classList.add("success-label"))):(e.classList.remove("success-label"),e.classList.add("error-label"),u(e,"Invalid email, try again","error"),n&&(n.classList.remove("success-label"),n.classList.add("error-label")))}const i=document.createElement("label");function u(e,t,r){i.textContent=t,i.classList.add(r+"-label"),e.parentNode.children[0].after(i)}function p(e){const t=document.querySelector("label.success-label"),r=document.querySelector("label.error-label");t&&(t.innerHTML=""),r&&(r.innerHTML=""),e.classList.remove("error-label"),e.classList.remove("success-label")}a.addEventListener("change",v);function v(){a.value,a.value=y(a,20)}function y(e,t){const r=e.value;return r.length<=t?r:r.slice(0,t)+"..."}function h(){m.show({color:"red",message:"ERROR SERVER",position:"topCenter"})}b.addEventListener("submit",E);function E(e){e.preventDefault();const t=e.currentTarget.elements,r=t.email.value,n=t.comments.value;let s=f(r);const o={email:r.trim(),comment:n.trim()},l={method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json; charset=UTF-8"}};try{s===!0&&n!=""?(L(l),w(),e.currentTarget.reset()):m.show({color:"red",message:"All form fields must be filled in",position:"topCenter"})}catch{h()}p(d)}const c=document.querySelector(".modal-window"),S=document.querySelector(".modal-close");function w(){return c.classList.add("is-open")}function q(){return c.classList.remove("is-open")}S.addEventListener("click",q);document.addEventListener("keydown",e=>{if(e.key==="Escape")return c.classList.remove("is-open")});c.addEventListener("click",e=>{if(e.target===c)return c.classList.remove("is-open")});
//# sourceMappingURL=index.js.map
